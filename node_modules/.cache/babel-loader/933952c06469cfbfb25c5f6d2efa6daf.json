{"ast":null,"code":"import _regeneratorRuntime from\"/Users/avishaiyaniv/Documents/Studying/Coding/React course 2/crwn-clothing/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/avishaiyaniv/Documents/Studying/Coding/React course 2/crwn-clothing/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/avishaiyaniv/Documents/Studying/Coding/React course 2/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import firebase from\"firebase/app\";import\"firebase/firestore\";import\"firebase/auth\";var firebaseConfig={apiKey:\"AIzaSyCEQybS4EJpnhv0WiSS80RNwl7VBcp4ZVI\",authDomain:\"clothing-store-backend.firebaseapp.com\",databaseURL:\"https://clothing-store-backend.firebaseio.com\",projectId:\"clothing-store-backend\",storageBucket:\"clothing-store-backend.appspot.com\",messagingSenderId:\"1078397740080\",appId:\"1:1078397740080:web:ccd0d0c9d12610c360f9f5\",measurementId:\"G-1B9G9ZERD7\"};export var createUserDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userFromAuth,additionalInfo){var userRef,snapshot,displayName,email,dateCreated;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userFromAuth){_context.next=2;break;}return _context.abrupt(\"return\");case 2:userRef=firestore.doc(\"users/\".concat(userFromAuth.uid));_context.next=5;return userRef.get();case 5:snapshot=_context.sent;if(snapshot.exists){_context.next=17;break;}displayName=userFromAuth.displayName,email=userFromAuth.email;dateCreated=new Date();_context.prev=9;_context.next=12;return userRef.set(_objectSpread({displayName:displayName,email:email,dateCreated:dateCreated},additionalInfo));case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);console.log(\"An Error occurred while creating user\",_context.t0.message);case 17:return _context.abrupt(\"return\",userRef);case 18:case\"end\":return _context.stop();}}},_callee,null,[[9,14]]);}));return function createUserDocument(_x,_x2){return _ref.apply(this,arguments);};}();firebase.initializeApp(firebaseConfig);export var auth=firebase.auth();export var firestore=firebase.firestore();var provider=new firebase.auth.GoogleAuthProvider();provider.setCustomParameters({propmpt:\"select_account\"});export var signInWithGoogle=function signInWithGoogle(){return auth.signInWithPopup(provider);};export default firebase;","map":{"version":3,"sources":["/Users/avishaiyaniv/Documents/Studying/Coding/React course 2/crwn-clothing/src/utils/firebase/Firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserDocument","userFromAuth","additionalInfo","userRef","firestore","doc","uid","get","snapshot","exists","displayName","email","dateCreated","Date","set","console","log","message","initializeApp","auth","provider","GoogleAuthProvider","setCustomParameters","propmpt","signInWithGoogle","signInWithPopup"],"mappings":"kuCAAA,MAAOA,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAO,oBAAP,CACA,MAAO,eAAP,CAEA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAE,yCADa,CAErBC,UAAU,CAAE,wCAFS,CAGrBC,WAAW,CAAE,+CAHQ,CAIrBC,SAAS,CAAE,wBAJU,CAKrBC,aAAa,CAAE,oCALM,CAMrBC,iBAAiB,CAAE,eANE,CAOrBC,KAAK,CAAE,4CAPc,CAQrBC,aAAa,CAAE,cARM,CAAvB,CAWA,MAAO,IAAMC,CAAAA,kBAAkB,0FAAG,iBAAOC,YAAP,CAAqBC,cAArB,wKAC3BD,YAD2B,iEAE1BE,OAF0B,CAEhBC,SAAS,CAACC,GAAV,iBAAuBJ,YAAY,CAACK,GAApC,EAFgB,uBAGTH,CAAAA,OAAO,CAACI,GAAR,EAHS,QAG1BC,QAH0B,kBAK3BA,QAAQ,CAACC,MALkB,0BAMtBC,WANsB,CAMCT,YAND,CAMtBS,WANsB,CAMTC,KANS,CAMCV,YAND,CAMTU,KANS,CAOxBC,WAPwB,CAOV,GAAIC,CAAAA,IAAJ,EAPU,wCAUtBV,CAAAA,OAAO,CAACW,GAAR,gBAAcJ,WAAW,CAAXA,WAAd,CAA2BC,KAAK,CAALA,KAA3B,CAAkCC,WAAW,CAAXA,WAAlC,EAAkDV,cAAlD,EAVsB,0FAY5Ba,OAAO,CAACC,GAAR,CAAY,uCAAZ,CAAqD,YAAMC,OAA3D,EAZ4B,wCAgBzBd,OAhByB,uEAAH,kBAAlBH,CAAAA,kBAAkB,gDAAxB,CAmBPV,QAAQ,CAAC4B,aAAT,CAAuB3B,cAAvB,EAEA,MAAO,IAAM4B,CAAAA,IAAI,CAAG7B,QAAQ,CAAC6B,IAAT,EAAb,CACP,MAAO,IAAMf,CAAAA,SAAS,CAAGd,QAAQ,CAACc,SAAT,EAAlB,CAEP,GAAMgB,CAAAA,QAAQ,CAAG,GAAI9B,CAAAA,QAAQ,CAAC6B,IAAT,CAAcE,kBAAlB,EAAjB,CACAD,QAAQ,CAACE,mBAAT,CAA6B,CAAEC,OAAO,CAAE,gBAAX,CAA7B,EACA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,SAAML,CAAAA,IAAI,CAACM,eAAL,CAAqBL,QAArB,CAAN,EAAzB,CAEP,cAAe9B,CAAAA,QAAf","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCEQybS4EJpnhv0WiSS80RNwl7VBcp4ZVI\",\n  authDomain: \"clothing-store-backend.firebaseapp.com\",\n  databaseURL: \"https://clothing-store-backend.firebaseio.com\",\n  projectId: \"clothing-store-backend\",\n  storageBucket: \"clothing-store-backend.appspot.com\",\n  messagingSenderId: \"1078397740080\",\n  appId: \"1:1078397740080:web:ccd0d0c9d12610c360f9f5\",\n  measurementId: \"G-1B9G9ZERD7\"\n};\n\nexport const createUserDocument = async (userFromAuth, additionalInfo) => {\n  if (!userFromAuth) return;\n  const userRef = firestore.doc(`users/${userFromAuth.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const { displayName, email } = userFromAuth;\n    const dateCreated = new Date();\n\n    try {\n      await userRef.set({ displayName, email, dateCreated, ...additionalInfo });\n    } catch (error) {\n      console.log(\"An Error occurred while creating user\", error.message);\n    }\n  }\n\n  return userRef;\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\nprovider.setCustomParameters({ propmpt: \"select_account\" });\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\n\nexport default firebase;\n"]},"metadata":{},"sourceType":"module"}